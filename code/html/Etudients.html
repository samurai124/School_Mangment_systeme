<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Étudiants</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="d-flex" style="background: #f5f6fa; font-family: sans-serif;">
    <div id="navbar" class="flex-shrink-0 navbar-spacer"></div>
    <div class="flex-grow-1">
        <div class="container my-4">
            <h1 style="font-weight: 700; margin-bottom: 24px;">Gestion des Étudiants</h1>
            <div class="row g-4 mb-4">
                <div class="col-md-4">
                    <div
                        style="background: #163a63; color: white; border-radius: 20px; padding: 1.5rem; display: flex; justify-content: space-between; box-shadow: 0 10px 20px rgba(0, 0, 0, .15);">
                        <div>
                            <h5 style="font-size: 1rem; opacity: 0.9;">Total Étudiants</h5>
                            <h1 id="total" style="font-weight: 700; margin: 0;">0</h1>
                        </div>
                        <div
                            style="width: 55px; height: 55px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 26px; background-color: #198754;">
                            <i class="bi bi-people"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div
                        style="background: #163a63; color: white; border-radius: 20px; padding: 1.5rem; display: flex; justify-content: space-between; box-shadow: 0 10px 20px rgba(0, 0, 0, .15);">
                        <div>
                            <h5 style="font-size: 1rem; opacity: 0.9;">Étudiants Actifs</h5>
                            <h1 id="actif" style="font-weight: 700; margin: 0;">0</h1>
                        </div>
                        <div
                            style="width: 55px; height: 55px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 26px; background-color: #198754;">
                            <i class="bi bi-person-check"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div
                        style="background: #163a63; color: white; border-radius: 20px; padding: 1.5rem; display: flex; justify-content: space-between; box-shadow: 0 10px 20px rgba(0, 0, 0, .15);">
                        <div>
                            <h5 style="font-size: 1rem; opacity: 0.9;">Étudiants Inactifs</h5>
                            <h1 id="inactif" style="font-weight: 700; margin: 0;">0</h1>
                        </div>
                        <div
                            style="width: 55px; height: 55px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 26px; background-color: #dc3545;">
                            <i class="bi bi-person-x"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-between mb-3 align-items-center">
                <div
                    style="background: #0b1b55; border-radius: 30px; padding: 8px 20px; width: 50%; display: flex; align-items: center;">
                    <i class="bi bi-search text-white me-2"></i>
                    <input type="text" id="search" placeholder="Rechercher..."
                        style="background: transparent; border: none; color: white; width: 100%; outline: none;">
                </div>
                <button class="btn btn-primary rounded-pill px-4" data-bs-toggle="modal" data-bs-target="#addModal">
                    <i class="bi bi-plus"></i> Ajouter un étudiant
                </button>
            </div>
            <div style="background: #163a63; border-radius: 25px; padding: 20px;">
                <table class="table table-borderless align-middle text-white mb-0">
                    <thead style="background: #0b1b55; border-radius: 15px;">
                        <tr style="text-transform: uppercase; font-size: 0.8rem; color: rgba(255,255,255,0.7);">
                            <th style="padding: 15px; border-radius: 15px 0 0 15px;">Étudiant</th>
                            <th>Email</th>
                            <th>Groupe</th>
                            <th>Statut</th>
                            <th style="border-radius: 0 15px 15px 0;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="studentTable">
                        <tr data-status="active" style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <td>
                                <div class="d-flex align-items-center gap-3">
                                    <div
                                        style="width: 45px; height: 45px; border-radius: 50%; background: #5aa2ff; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                                        ZO</div>
                                    <div><strong style="display: block;">Zakaria Outla</strong><small
                                            style="opacity: 0.7;">Groupe 4</small></div>
                                </div>
                            </td>
                            <td>zakariaoutla@gmail.com</td>
                            <td>Groupe 4</td>
                            <td><span class="badge bg-success"
                                    style="border-radius: 20px; padding: 5px 12px;">Actif</span></td>
                            <td>
                                <i class="bi bi-eye me-3" style="cursor: pointer;"></i>
                                <i class="bi bi-pencil me-3" style="cursor: pointer;"></i>
                                <i class="bi bi-trash text-danger" style="cursor: pointer;"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal fade" id="addModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Ajouter Étudiant</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <input id="name" class="form-control mb-2" placeholder="Nom complet">
                        <input id="email" class="form-control mb-2" placeholder="Email">
                        <input id="group" class="form-control mb-2" placeholder="Ex: Groupe 4">
                        <select id="status" class="form-select">
                            <option value="active">Actif</option>
                            <option value="inactive">Inactif</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button class="btn btn-success" onclick="addStudent()">Ajouter</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/2974241521.js" crossorigin="anonymous"></script>
    <script src="../js/index.js"></script>
    <script>
        // Fetch Navbar
        fetch("NavBar.html")
            .then(res => res.text())
            .then(data => { document.getElementById("navbar").innerHTML = data; });
        // Logic
        const table = document.getElementById("studentTable");
        const searchInput = document.getElementById("search");
        const totalEl = document.getElementById("total");
        const actifEl = document.getElementById("actif");
        const inactifEl = document.getElementById("inactif");
        function updateStats() {
            const rows = table.querySelectorAll("tr");
            let actif = 0, inactif = 0;
            rows.forEach(r => {
                if (r.dataset.status === "active") actif++;
                else inactif++;
            });
            totalEl.innerText = rows.length;
            actifEl.innerText = actif;
            inactifEl.innerText = inactif;
        }
        function addStudent() {
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const group = document.getElementById("group").value;
            const status = document.getElementById("status").value;
            if (!name || !email || !group) return alert("Veuillez remplir tous les champs");
            const initials = name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
            const newRow = `
                <tr data-status="${status}" style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td>
                        <div class="d-flex align-items-center gap-3">
                            <div style="width: 45px; height: 45px; border-radius: 50%; background: #5aa2ff; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold;">${initials}</div>
                            <div><strong style="display: block;">${name}</strong><small style="opacity: 0.7;">${group}</small></div>
                        </div>
                    </td>
                    <td>${email}</td>
                    <td>${group}</td>
                    <td><span class="badge bg-${status === "active" ? "success" : "danger"}" style="border-radius: 20px; padding: 5px 12px;">${status === "active" ? "Actif" : "Inactif"}</span></td>
                    <td><i class="bi bi-eye me-3"></i><i class="bi bi-pencil me-3"></i><i class="bi bi-trash text-danger"></i></td>
                </tr>`;
            table.insertAdjacentHTML('beforeend', newRow);
            updateStats();
            // Close Modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addModal'));
            modal.hide();
            // Reset fields
            document.getElementById("name").value = "";
            document.getElementById("email").value = "";
            document.getElementById("group").value = "";
        }
        searchInput.addEventListener("keyup", () => {
            const val = searchInput.value.toLowerCase();
            document.querySelectorAll("#studentTable tr").forEach(r => {
                r.style.display = r.innerText.toLowerCase().includes(val) ? "" : "none";
            });
        });
        updateStats();
    </script>
</body>

</html>